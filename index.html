<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü™ô CoinEgg - Tap to Earn USDT</title>
    <!-- Gigapub Ads Script -->
    <script data-project-id="5348">
      !function(){
        var s=document.currentScript,p=s.getAttribute('data-project-id')||'default';
        var d=['https://ad.gigapub.tech','https://ru-ad.gigapub.tech'],i=0,t,sc;
        function l(){
          sc=document.createElement('script');
          sc.async=true;
          sc.src=d[i]+'/script?id='+p;
          clearTimeout(t);
          t=setTimeout(function(){
            sc.onload=sc.onerror=null;
            sc.src='';
            if(++i<d.length)l();
          },15000);
          sc.onload=function(){clearTimeout(t)};
          sc.onerror=function(){clearTimeout(t);if(++i<d.length)l()};
          document.head.appendChild(sc);
        }
        l();
      }();
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            user-select: none;
        }

        .page {
            display: none;
            min-height: 100vh;
            padding: 20px;
        }

        .page.active {
            display: block;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
        }

        /* Home Page */
        #homePage {
            background: linear-gradient(180deg, #4c1d95 0%, #5b21b6 50%, #312e81 100%);
            color: white;
        }

        .header {
            text-align: center;
            padding: 30px 0;
        }

        .header h1 {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .header p {
            color: #c4b5fd;
        }

        .balance-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .balance-card h2 {
            font-size: 56px;
            margin: 10px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(96, 165, 250, 0.3);
            border-radius: 20px;
            padding: 15px;
            text-align: center;
        }

        .stat-box p {
            font-size: 12px;
            color: #bfdbfe;
            margin-top: 5px;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .nav-btn {
            background: linear-gradient(135deg, #fbbf24 0%, #f97316 100%);
            border: none;
            border-radius: 20px;
            padding: 30px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .nav-btn:hover {
            transform: scale(1.05);
        }

        .nav-btn:active {
            transform: scale(0.95);
        }

        .nav-btn.pink {
            background: linear-gradient(135deg, #ec4899 0%, #a855f7 100%);
        }

        .nav-btn.blue {
            background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
        }

        .nav-btn.green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .nav-btn.purple {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }

        /* Tap Page */
        #tapPage {
            background: linear-gradient(180deg, #78350f 0%, #c2410c 50%, #991b1b 100%);
            color: white;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 24px;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .tap-counter {
            text-align: center;
            margin-bottom: 40px;
        }

        .tap-counter h2 {
            font-size: 56px;
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24 0%, #f97316 100%);
            transition: width 0.3s;
        }

        .tap-area {
            position: relative;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tap-button {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: linear-gradient(135deg, #fbbf24 0%, #f97316 50%, #dc2626 100%);
            border: 8px solid rgba(255, 255, 255, 0.3);
            font-size: 100px;
            cursor: pointer;
            transition: transform 0.1s;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .tap-button:active {
            transform: scale(0.9);
        }

        .tap-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .coin-float {
            position: absolute;
            font-size: 36px;
            font-weight: bold;
            color: #fbbf24;
            pointer-events: none;
            animation: float 1s ease-out forwards;
        }

        @keyframes float {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-100px); }
        }

        .balance-display {
            text-align: center;
            margin-top: 30px;
        }

        .balance-display h3 {
            font-size: 48px;
        }

        /* Referral Page */
        #referralPage {
            background: linear-gradient(180deg, #831843 0%, #7e22ce 50%, #4338ca 100%);
            color: white;
        }

        .referral-stats {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .referral-stats h2 {
            font-size: 64px;
            margin: 20px 0;
        }

        .levels-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .level-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .link-card {
            background: linear-gradient(135deg, #ec4899 0%, #a855f7 100%);
            border-radius: 30px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .link-btn {
            width: 100%;
            background: white;
            color: #a855f7;
            border: none;
            padding: 25px;
            border-radius: 20px;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            transition: transform 0.2s;
        }

        .link-btn:hover {
            background: #f3e8ff;
            transform: scale(1.02);
        }

        .link-btn:active {
            transform: scale(0.98);
        }

        .telegram-icon {
            font-size: 32px;
        }

        /* Tasks Page */
        #tasksPage {
            background: linear-gradient(180deg, #1e3a8a 0%, #0e7490 50%, #115e59 100%);
            color: white;
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .task-item {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .task-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .task-reward {
            color: #fbbf24;
            font-weight: bold;
        }

        .task-btn {
            width: 100%;
            background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
            border: none;
            padding: 15px;
            border-radius: 15px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .task-btn.completed {
            background: rgba(16, 185, 129, 0.2);
            color: #6ee7b7;
            cursor: default;
        }

        .progress-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            margin-top: 30px;
        }

        .progress-card h3 {
            font-size: 36px;
            margin-top: 10px;
        }

        /* Withdraw Page */
        #withdrawPage {
            background: linear-gradient(180deg, #065f46 0%, #047857 50%, #115e59 100%);
            color: white;
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid #fbbf24;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .methods-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }

        .method-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .method-dot {
            width: 10px;
            height: 10px;
            background: #10b981;
            border-radius: 50%;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid #3b82f6;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .withdraw-btn {
            width: 100%;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border: none;
            padding: 20px;
            border-radius: 20px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }

        .withdraw-btn:disabled {
            background: #6b7280;
            opacity: 0.5;
            cursor: not-allowed;
        }

        .withdraw-info {
            text-align: center;
            margin-top: 30px;
            color: #6ee7b7;
        }

        .withdraw-info p {
            margin: 5px 0;
        }

        /* Spin Page */
        #spinPage {
            background: linear-gradient(180deg, #0c4a6e 0%, #075985 50%, #0369a1 100%);
            color: white;
        }

        .spin-counter {
            text-align: center;
            margin-bottom: 30px;
        }

        .spin-wheel {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto 40px;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                #ef4444 0deg 60deg,
                #f97316 60deg 120deg,
                #fbbf24 120deg 180deg,
                #10b981 180deg 240deg,
                #3b82f6 240deg 300deg,
                #8b5cf6 300deg 360deg
            );
            position: relative;
            transition: transform 3s cubic-bezier(0.17, 0.67, 0.22, 0.99);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: #dc2626;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 10;
        }

        .spin-btn {
            display: block;
            width: 200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
        }

        .spin-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .spin-result {
            text-align: center;
            margin-top: 30px;
            font-size: 24px;
            min-height: 36px;
        }

        .gift-box {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border: 2px solid #fcd34d;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #92400e;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .ad-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .ad-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 24px;
            cursor: pointer;
        }

        .ad-container {
            width: 90%;
            height: 80%;
            background: white;
            border-radius: 20px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <!-- Home Page -->
    <div id="homePage" class="page active">
        <div class="container">
            <div class="header">
                <h1>ü™ô CoinEgg</h1>
                <p>Tap & Earn Free USDT</p>
            </div>

            <div class="balance-card">
                <p style="color: #c4b5fd;">Total Balance</p>
                <h2 id="homeBalance">0 USDT</h2>
                <div style="margin-top: 20px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; font-size: 14px;">
                    <div>
                        <p style="color: #c4b5fd;">Coins</p>
                        <p style="font-size: 24px; font-weight: bold;" id="homeCoins">0</p>
                    </div>
                    <div>
                        <p style="color: #c4b5fd;">Spins Left</p>
                        <p style="font-size: 24px; font-weight: bold;" id="homeSpins">30</p>
                    </div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div style="font-size: 24px;">üèÜ</div>
                    <p>Rank</p>
                    <p style="font-weight: bold; color: white;">#<span id="homeRank">999</span></p>
                </div>
                <div class="stat-box">
                    <div style="font-size: 24px;">üéÅ</div>
                    <p>Tasks</p>
                    <p style="font-weight: bold; color: white;"><span id="homeTasksCompleted">0</span>/5</p>
                </div>
                <div class="stat-box">
                    <div style="font-size: 24px;">ü™ô</div>
                    <p>Today</p>
                    <p style="font-weight: bold; color: white;" id="homeTodayClaims">0</p>
                </div>
            </div>

            <div class="nav-grid">
                <button class="nav-btn" onclick="showPage('tapPage')">
                    <div style="font-size: 40px; margin-bottom: 10px;">ü™ô</div>
                    <div>Tap to Earn</div>
                    <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">Earn 0.005 USDT per tap</div>
                </button>
                <button class="nav-btn pink" onclick="showPage('referralPage')">
                    <div style="font-size: 40px; margin-bottom: 10px;">üë•</div>
                    <div>Invite Friends</div>
                    <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">Get Your Referral Link</div>
                </button>
                <button class="nav-btn blue" onclick="showPage('tasksPage')">
                    <div style="font-size: 40px; margin-bottom: 10px;">‚úÖ</div>
                    <div>Tasks</div>
                    <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">Complete & earn</div>
                </button>
                <button class="nav-btn green" onclick="showPage('withdrawPage')">
                    <div style="font-size: 40px; margin-bottom: 10px;">üí∞</div>
                    <div>Withdraw</div>
                    <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">Min: 50 USDT</div>
                </button>
                <button class="nav-btn" style="background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%);" onclick="showPage('spinPage')">
                    <div style="font-size: 40px; margin-bottom: 10px;">üé°</div>
                    <div>Spin Wheel</div>
                    <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">Win USDT Daily</div>
                </button>
            </div>
        </div>
    </div>

    <!-- Tap Page -->
    <div id="tapPage" class="page">
        <div class="container">
            <button class="back-btn" onclick="showPage('homePage')">‚Üê Back</button>
            <h1 style="font-size: 36px; margin-bottom: 30px;">Tap to Earn USDT</h1>

            <div class="tap-counter">
                <div class="balance-card">
                    <p style="color: #fed7aa;">Today's Claims</p>
                    <h2 id="tapCounter">0/<span id="dailyLimit2">1000</span></h2>
                    <div class="progress-bar" style="margin-top: 20px;">
                        <div class="progress-fill" id="tapProgress" style="width: 0%;"></div>
                    </div>
                    <p style="color: #fbbf24; margin-top: 10px;">Taps until next ad: <span id="tapsUntilAd">10</span></p>
                </div>
            </div>

            <div class="tap-area" id="tapArea">
                <button class="tap-button" id="tapButton" onclick="handleTap()">ü™ô</button>
            </div>

            <div class="balance-display">
                <p style="color: #fed7aa; font-size: 18px;">Current Balance</p>
                <h3 id="tapBalance">0 USDT</h3>
                <p style="color: #fbbf24; margin-top: 10px;"><span id="usdtPerClaim">0.005</span> USDT per tap</p>
                <p style="color: #fbbf24; margin-top: 5px;"><span id="coinPerTap">1</span> Coin per tap</p>
            </div>
        </div>
    </div>

    <!-- Referral Page -->
    <div id="referralPage" class="page">
        <div class="container">
            <button class="back-btn" onclick="showPage('homePage')">‚Üê Back</button>
            <h1 style="font-size: 36px; margin-bottom: 30px;">Invite Friends</h1>

            <div class="referral-stats">
                <div style="font-size: 64px; margin-bottom: 20px;">üì¢</div>
                <p style="color: #fbcfe8;">Join Our Telegram Channel</p>
                <h2 style="font-size: 48px;">CoinEgg</h2>
                <p style="color: #fbcfe8;">Get updates & notifications</p>
            </div>

            <div class="levels-card">
                <h3 style="font-size: 20px; margin-bottom: 20px;">Why Join?</h3>
                <div class="level-item">
                    <span>Get latest updates</span>
                    <span style="color: #fbcfe8; font-weight: bold;">üì¢</span>
                </div>
                <div class="level-item">
                    <span>Stay informed</span>
                    <span style="color: #fbcfe8; font-weight: bold;">üí°</span>
                </div>
                <div class="level-item">
                    <span>Community support</span>
                    <span style="color: #fbcfe8; font-weight: bold;">üë•</span>
                </div>
            </div>

            <div class="link-card">
                <p style="text-align: center; font-size: 18px; font-weight: bold; margin-bottom: 20px;">Click below to get your referral link</p>
                <button class="link-btn" onclick="goToTelegram()">
                    <span class="telegram-icon">üë•</span>
                    <span>Your Referral Link</span>
                </button>
                <p style="text-align: center; margin-top: 20px; font-size: 14px; color: #fbcfe8;">
                    You will be redirected to Telegram
                </p>
            </div>
        </div>
    </div>

    <!-- Tasks Page -->
    <div id="tasksPage" class="page">
        <div class="container">
            <button class="back-btn" onclick="showPage('homePage')">‚Üê Back</button>
            <h1 style="font-size: 36px; margin-bottom: 30px;">Complete Tasks</h1>

            <div class="task-list" id="taskList">
                <div class="task-item">
                    <div class="task-header">
                        <div style="flex: 1;">
                            <div class="task-title">Join Telegram Channel</div>
                            <div class="task-reward">ü™ô +1.00 USDT</div>
                        </div>
                        <div id="task1Status" style="background: rgba(16, 185, 129, 0.2); color: #6ee7b7; border-radius: 50%; padding: 10px; display: none;">‚úì</div>
                    </div>
                    <button class="task-btn" id="task1Btn" onclick="completeTask(1)">
                        Join Channel
                    </button>
                </div>
            </div>

            <div class="progress-card">
                <p style="color: #a5f3fc;">Task Progress</p>
                <h3><span id="taskProgress">0</span>/1</h3>
            </div>
        </div>
    </div>

    <!-- Withdraw Page -->
    <div id="withdrawPage" class="page">
        <div class="container">
            <button class="back-btn" onclick="showPage('homePage')">‚Üê Back</button>
            <h1 style="font-size: 36px; margin-bottom: 30px;">Withdraw USDT</h1>

            <div class="balance-card">
                <p style="color: #6ee7b7;">Available Balance</p>
                <h2 id="withdrawBalance">0 USDT</h2>
                <p style="color: #6ee7b7; margin-top: 10px;">Referrals: <span id="referralCount">0</span>/20 required</p>
            </div>

            <div class="warning-box" id="warningBox">
                <p style="font-weight: bold;">‚ö†Ô∏è Minimum withdrawal: 50 USDT</p>
                <p style="font-size: 14px; color: #fef3c7; margin-top: 10px;">Minimum 20 referrals required for withdrawal</p>
            </div>

            <div class="methods-card">
                <h3 style="margin-bottom: 15px;">Withdrawal Method</h3>
                <div class="method-item">
                    <div class="method-dot"></div>
                    <span>TON Wallet (The Open Network)</span>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 10px; color: #6ee7b7;">Withdrawal Amount (USDT)</label>
                <input type="number" id="withdrawAmount" value="50" min="50" step="1" style="width: 100%; padding: 15px; border-radius: 15px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white;">
                <p style="font-size: 12px; color: #fbbf24; margin-top: 5px;">Fee: 5% ‚Ä¢ You'll receive: <span id="netAmount">47.5</span> USDT</p>
            </div>

            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 10px; color: #6ee7b7;">TON Wallet Address</label>
                <input type="text" id="walletAddress" placeholder="Enter your TON wallet address" style="width: 100%; padding: 15px; border-radius: 15px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white;">
            </div>

            <button class="withdraw-btn" id="withdrawBtn" onclick="requestWithdraw()">Request Withdrawal</button>

            <div class="withdraw-info">
                <p>‚úì Minimum withdrawal: 50 USDT</p>
                <p>‚úì Minimum 20 referrals required</p>
                <p>‚úì TON Wallet only</p>
                <p>‚úì Processing time: 24-48 hours</p>
            </div>
        </div>
    </div>

    <!-- Spin Page -->
    <div id="spinPage" class="page">
        <div class="container">
            <button class="back-btn" onclick="showPage('homePage')">‚Üê Back</button>
            <h1 style="font-size: 36px; margin-bottom: 30px;">Spin to Win USDT</h1>

            <div class="spin-counter">
                <div class="balance-card">
                    <p style="color: #bae6fd;">Daily Spins Remaining</p>
                    <h2 id="spinsLeft">30</h2>
                    <p style="color: #bae6fd; margin-top: 10px;">Watch ad to spin each time</p>
                </div>
            </div>

            <div class="spin-wheel">
                <div class="wheel-pointer"></div>
                <div class="wheel" id="wheel">
                    <!-- Gift boxes will be positioned here -->
                </div>
            </div>

            <button class="spin-btn" id="spinBtn" onclick="spinWheel()">üé° SPIN WHEEL (Watch Ad)</button>

            <div class="spin-result" id="spinResult">
                Spin the wheel to win USDT!
            </div>

            <div class="progress-card" style="margin-top: 40px;">
                <p style="color: #bae6fd;">Today's Winnings</p>
                <h3 id="dailyWinnings">0 USDT</h3>
            </div>
        </div>
    </div>

    <!-- Ad Overlay -->
    <div class="ad-overlay" id="adOverlay">
        <button class="ad-close" onclick="closeAd()">√ó</button>
        <div class="ad-container" id="adContainer">
            <!-- Ad will be loaded here -->
        </div>
    </div>

    <script>
        // Gigapub Ads Fallback Integration
        window.AdGigaFallback = function() {
            return new Promise((resolve) => {
                // Show ad overlay for fallback
                document.getElementById('adOverlay').style.display = 'flex';
                
                // Simulate ad loading
                setTimeout(() => {
                    document.getElementById('adContainer').innerHTML = `
                        <div style="width:100%;height:100%;background:#f0f0f0;display:flex;flex-direction:column;align-items:center;justify-content:center;">
                            <div style="font-size:24px;color:#333;margin-bottom:20px;">üé• Advertisement</div>
                            <div style="width:300px;height:250px;background:#ddd;border-radius:10px;margin-bottom:20px;display:flex;align-items:center;justify-content:center;">
                                <div style="text-align:center;">
                                    <div style="font-size:48px;">ü™ô</div>
                                    <div style="color:#666;">Ad Content</div>
                                </div>
                            </div>
                            <div style="color:#666;text-align:center;padding:0 20px;">
                                Please wait 3 seconds...
                            </div>
                        </div>
                    `;
                    
                    // Simulate ad completion after 3 seconds
                    setTimeout(() => {
                        closeAd();
                        resolve();
                    }, 3000);
                }, 500);
            });
        };

        // Gigapub Ads compatibility layer
        if (window.showGiga === undefined) {
            window.showGiga = window.AdGigaFallback;
        }
    </script>

    <script>
        // App Data
        let appData = {
            usdtBalance: 0,
            coinBalance: 0,
            todayClaims: 0,
            dailyLimit: 1000,
            spinsLeft: 30,
            spinsToday: 0,
            dailyWinnings: 0,
            completedTasks: [],
            referralCount: 0,
            tapCount: 0,
            usdtPerTap: 0.005,
            coinPerTap: 1,
            adsPerTap: 10,
            adsPerSpin: 1,
            autoAdInterval: 30, // seconds
            minWithdraw: 50,
            minReferrals: 20,
            withdrawalFee: 5,
            spinRewards: [
                0.07, 0.07, 0.05, 0.03, 0.04, 0.01, 0.02, 0.01, 0.02, 0.01,
                0.02, 0.01, 0.02, 0.01, 0.02, 0.01, 0.02, 0.01, 0.02, 0.01,
                0.02, 0.01, 0.02, 0.01, 0.02, 0.01, 0.02, 0.01, 0.02, 0.01
            ]
        };

        // Initialize
        function init() {
            loadFromLocalStorage();
            updateAllDisplays();
            setupAutoAds();
            
            // Initialize spin wheel
            initializeWheel();
            
            // Check daily reset
            checkDailyReset();
        }

        // Load from Local Storage
        function loadFromLocalStorage() {
            const saved = localStorage.getItem('coinegg_data');
            if (saved) {
                const data = JSON.parse(saved);
                appData = { ...appData, ...data };
                
                // Check if it's a new day for spins
                const lastSpinDate = localStorage.getItem('coinegg_lastSpinDate');
                const today = new Date().toDateString();
                if (lastSpinDate !== today) {
                    appData.spinsLeft = 30;
                    appData.spinsToday = 0;
                    appData.dailyWinnings = 0;
                    localStorage.setItem('coinegg_lastSpinDate', today);
                }
            }
        }

        // Save to Local Storage
        function saveToLocalStorage() {
            localStorage.setItem('coinegg_data', JSON.stringify(appData));
        }

        // Check Daily Reset
        function checkDailyReset() {
            const lastReset = localStorage.getItem('coinegg_lastReset');
            const today = new Date().toDateString();
            
            if (lastReset !== today) {
                appData.todayClaims = 0;
                appData.tapCount = 0;
                localStorage.setItem('coinegg_lastReset', today);
                saveToLocalStorage();
            }
        }

        // Setup Auto Ads
        function setupAutoAds() {
            setInterval(() => {
                if (Math.random() > 0.7) { // 30% chance every 30 seconds
                    showAd();
                }
            }, appData.autoAdInterval * 1000);
        }

        // Show Ad
        function showAd() {
            window.showGiga()
                .then(() => {
                    console.log('Auto ad completed');
                })
                .catch(e => {
                    console.log('Auto ad error:', e);
                });
        }

        // Close Ad
        function closeAd() {
            document.getElementById('adOverlay').style.display = 'none';
        }

        // Handle Tap
        async function handleTap() {
            if (appData.todayClaims >= appData.dailyLimit) {
                alert(`Daily limit reached! Come back tomorrow.\nLimit: ${appData.dailyLimit} claims/day`);
                return;
            }

            // Increment counters
            appData.tapCount++;
            appData.todayClaims++;
            appData.coinBalance += appData.coinPerTap;
            appData.usdtBalance += appData.usdtPerTap;

            // Floating coin animation
            showCoinAnimation(appData.usdtPerTap);

            // Check if ad should show (every 10 taps)
            if (appData.tapCount % appData.adsPerTap === 0) {
                try {
                    await window.showGiga();
                    console.log('Tap ad completed');
                } catch (error) {
                    console.log('Tap ad error:', error);
                }
            }

            // Update and save
            updateAllDisplays();
            saveToLocalStorage();
        }

        // Show Coin Animation
        function showCoinAnimation(amount) {
            const tapArea = document.getElementById('tapArea');
            const coin = document.createElement('div');
            coin.className = 'coin-float';
            coin.textContent = `+${amount.toFixed(3)}`;
            coin.style.left = (Math.random() * 200 + 140) + 'px';
            coin.style.top = '150px';
            tapArea.appendChild(coin);

            setTimeout(() => {
                coin.remove();
            }, 1000);
        }

        // Go to Telegram
        function goToTelegram() {
            const telegramLink = 'https://t.me/gift_fest_io_bot?start=null';
            // Open Telegram link in new tab
            window.open(telegramLink, '_blank');
        }

        // Complete Task
        async function completeTask(taskId) {
            if (appData.completedTasks.includes(taskId)) return;

            // Open Telegram channel
            window.open('https://t.me/Feeddy735', '_blank');
            
            // Mark as completed
            appData.completedTasks.push(taskId);
            
            // Add reward
            appData.usdtBalance += 1.00;
            
            // Update UI
            document.getElementById(`task${taskId}Status`).style.display = 'block';
            document.getElementById(`task${taskId}Btn`).classList.add('completed');
            document.getElementById(`task${taskId}Btn`).textContent = '‚úì Completed';
            document.getElementById(`task${taskId}Btn`).disabled = true;
            
            alert('‚úÖ Task completed! You earned 1.00 USDT!');
            
            updateAllDisplays();
            saveToLocalStorage();
        }

        // Request Withdrawal
        function requestWithdraw() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const walletAddress = document.getElementById('walletAddress').value.trim();

            // Validations
            if (amount < appData.minWithdraw) {
                alert(`Minimum withdrawal is ${appData.minWithdraw} USDT`);
                return;
            }

            if (amount > appData.usdtBalance) {
                alert("Insufficient balance");
                return;
            }

            if (appData.referralCount < appData.minReferrals) {
                alert(`Minimum ${appData.minReferrals} referrals required for withdrawal.\nYou have ${appData.referralCount} referrals.`);
                return;
            }

            if (!walletAddress) {
                alert("Please enter your TON wallet address");
                return;
            }

            if (!walletAddress.startsWith('UQ') && !walletAddress.startsWith('EQ') && walletAddress.length < 48) {
                alert("Please enter a valid TON wallet address");
                return;
            }

            // Calculate fee and net amount
            const fee = amount * (appData.withdrawalFee / 100);
            const netAmount = amount - fee;

            // Deduct from balance
            appData.usdtBalance -= amount;

            // Show success message
            alert(`‚úÖ Withdrawal request submitted!\n\nAmount: ${amount.toFixed(2)} USDT\nFee: ${fee.toFixed(2)} USDT (${appData.withdrawalFee}%)\nNet: ${netAmount.toFixed(2)} USDT\nTON Address: ${walletAddress}\n\nProcessing time: 24-48 hours`);

            // Reset form
            document.getElementById('withdrawAmount').value = appData.minWithdraw;
            document.getElementById('walletAddress').value = '';

            // Update and save
            updateAllDisplays();
            saveToLocalStorage();
        }

        // Initialize Wheel
        function initializeWheel() {
            const wheel = document.getElementById('wheel');
            wheel.innerHTML = '';
            
            // Create 12 gift boxes around the wheel
            for (let i = 0; i < 12; i++) {
                const angle = (i * 30) * Math.PI / 180;
                const radius = 120;
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);
                
                const gift = document.createElement('div');
                gift.className = 'gift-box';
                gift.style.left = `calc(50% + ${x}px)`;
                gift.style.top = `calc(50% + ${y}px)`;
                gift.style.transform = `translate(-50%, -50%)`;
                gift.textContent = 'üéÅ';
                
                wheel.appendChild(gift);
            }
        }

        // Spin Wheel
        async function spinWheel() {
            if (appData.spinsLeft <= 0) {
                alert('No spins left today! Come back tomorrow.');
                return;
            }

            const spinBtn = document.getElementById('spinBtn');
            const wheel = document.getElementById('wheel');
            const resultDiv = document.getElementById('spinResult');

            // Disable button during spin
            spinBtn.disabled = true;
            spinBtn.textContent = 'Watching Ad...';

            try {
                // Show ad before spin using Gigapub
                await window.showGiga();
                console.log('Spin ad completed');
                
                // Re-enable button
                spinBtn.disabled = false;
                spinBtn.textContent = 'üé° SPIN WHEEL (Watch Ad)';

                // Deduct spin
                appData.spinsLeft--;
                appData.spinsToday++;

                // Calculate random reward
                const rewardIndex = appData.spinsToday - 1;
                let reward;
                
                if (rewardIndex < appData.spinRewards.length) {
                    reward = appData.spinRewards[rewardIndex];
                } else {
                    // If more than 30 spins (shouldn't happen), give random reward
                    reward = [0.01, 0.02, 0.03, 0.04, 0.05][Math.floor(Math.random() * 5)];
                }

                // Add reward
                appData.usdtBalance += reward;
                appData.dailyWinnings += reward;

                // Spin animation
                const spins = 5 + Math.random() * 3; // 5-8 full spins
                const extraDegrees = Math.random() * 360; // Random stopping point
                const totalDegrees = spins * 360 + extraDegrees;
                
                wheel.style.transform = `rotate(${totalDegrees}deg)`;
                
                // Show result after spin
                setTimeout(() => {
                    resultDiv.innerHTML = `üéâ Congratulations! You won <span style="color:#fbbf24;font-weight:bold;">${reward.toFixed(2)} USDT</span>!`;
                    updateAllDisplays();
                    saveToLocalStorage();
                }, 3000);

            } catch (error) {
                // If ad fails, still allow spin but with smaller reward
                console.log('Spin ad error, giving reduced reward:', error);
                
                spinBtn.disabled = false;
                spinBtn.textContent = 'üé° SPIN WHEEL (Watch Ad)';
                
                appData.spinsLeft--;
                const reward = 0.01;
                appData.usdtBalance += reward;
                appData.dailyWinnings += reward;
                
                resultDiv.innerHTML = `üéâ You won <span style="color:#fbbf24;font-weight:bold;">${reward.toFixed(2)} USDT</span>!`;
                updateAllDisplays();
                saveToLocalStorage();
            }
        }

        // Update All Displays
        function updateAllDisplays() {
            // Home page
            document.getElementById('homeBalance').textContent = appData.usdtBalance.toFixed(3) + ' USDT';
            document.getElementById('homeCoins').textContent = appData.coinBalance;
            document.getElementById('homeSpins').textContent = appData.spinsLeft;
            document.getElementById('homeTasksCompleted').textContent = appData.completedTasks.length;
            document.getElementById('homeTodayClaims').textContent = appData.todayClaims;

            // Tap page
            document.getElementById('tapCounter').textContent = appData.todayClaims + '/' + appData.dailyLimit;
            const progressPercent = (appData.todayClaims / appData.dailyLimit) * 100;
            document.getElementById('tapProgress').style.width = progressPercent + '%';
            document.getElementById('tapBalance').textContent = appData.usdtBalance.toFixed(3) + ' USDT';
            document.getElementById('tapsUntilAd').textContent = appData.adsPerTap - (appData.tapCount % appData.adsPerTap);
            
            const tapBtn = document.getElementById('tapButton');
            tapBtn.disabled = appData.todayClaims >= appData.dailyLimit;

            // Withdraw page
            document.getElementById('withdrawBalance').textContent = appData.usdtBalance.toFixed(3) + ' USDT';
            document.getElementById('referralCount').textContent = appData.referralCount;
            
            const withdrawBtn = document.getElementById('withdrawBtn');
            const warningBox = document.getElementById('warningBox');
            
            if (appData.usdtBalance < appData.minWithdraw || appData.referralCount < appData.minReferrals) {
                withdrawBtn.disabled = true;
                warningBox.style.display = 'block';
            } else {
                withdrawBtn.disabled = false;
                warningBox.style.display = 'none';
            }

            // Calculate net withdrawal amount
            const amount = parseFloat(document.getElementById('withdrawAmount').value) || appData.minWithdraw;
            const fee = amount * (appData.withdrawalFee / 100);
            const netAmount = amount - fee;
            document.getElementById('netAmount').textContent = netAmount.toFixed(2);
        }

        // Show Page
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            updateAllDisplays();
        }

        // Initialize on load
        window.onload = init;
    </script>
</body>
</html>
